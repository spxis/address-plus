{
  "$schema": "../../schemas/test-file.json",
  "name": "Compatibility Tests",
  "description": "Comprehensive compatibility tests including parse-address library comparison, snake case compatibility, multiple parser functions, and basic address parsing",
  "tests": {
    "parseAddressComparison": [
      {
        "id": 1,
        "description": "Directional prefix with coordinate-style address",
        "input": "48S 400E, Salt Lake City UT",
        "category": "directional-coordinates"
      },
      {
        "id": 2,
        "description": "Complex address with secondary unit",
        "input": "550 S 400 E #3206, Salt Lake City UT 84111",
        "category": "secondary-unit"
      },
      {
        "id": 3,
        "description": "Address with ZIP+4 but no state",
        "input": "233 S Wacker Dr 60606-6306",
        "category": "zip-plus-four"
      },
      {
        "id": 4,
        "description": "Highway address with ZIP only",
        "input": "1005 Gravenstein Hwy 95472",
        "category": "highway"
      },
      {
        "id": 5,
        "description": "Standard address format",
        "input": "123 Main St, Anytown CA 12345",
        "category": "standard"
      },
      {
        "id": 6,
        "description": "Secondary unit prefix format",
        "input": "#42 233 S Wacker Dr 60606",
        "category": "unit-prefix"
      },
      {
        "id": 7,
        "description": "Intersection address",
        "input": "Mission & Valencia San Francisco CA",
        "category": "intersection"
      }
    ],
    "snakeCaseCompatibility": [
      {
        "description": "should handle PO Box addresses with snake_case",
        "input": "P.O. Box 123, Anytown CA 90210",
        "options": {
          "useSnakeCase": true
        },
        "expected": {
          "sec_unit_type": "PO Box",
          "sec_unit_num": "123"
        }
      },
      {
        "description": "should handle intersections with snake_case",
        "input": "Main St & Elm Ave, Anytown CA",
        "options": {
          "useSnakeCase": true
        },
        "expected": {
          "street1": "Main",
          "street2": "Elm",
          "type1": "St",
          "type2": "Ave"
        }
      },
      {
        "description": "should handle general delivery with snake_case",
        "input": "General Delivery, Smalltown MT 59718",
        "options": {
          "useSnakeCase": true
        },
        "expected": {
          "general_delivery": true
        }
      },
      {
        "description": "should match original parse-address format exactly",
        "input": "#42 233 S Wacker Dr 60606",
        "options": {
          "useSnakeCase": true
        },
        "expected": {
          "sec_unit_type": "#",
          "sec_unit_num": "42",
          "number": "233",
          "prefix": "S",
          "street": "Wacker",
          "type": "Dr",
          "zip": "60606",
          "country": "US"
        }
      },
      {
        "description": "should preserve all other fields in snake_case",
        "input": "123 Main St Apartment 4B, Anytown CA 90210",
        "options": {
          "useSnakeCase": true
        },
        "expected": {
          "number": "123",
          "street": "Main",
          "type": "St",
          "sec_unit_type": "Apartment",
          "sec_unit_num": "4B",
          "city": "Anytown",
          "state": "CA",
          "zip": "90210",
          "country": "US"
        }
      },
      {
        "description": "should handle Canadian addresses with snake_case",
        "input": "123 Main St, Toronto ON M5V 3A8",
        "options": {
          "useSnakeCase": true
        },
        "expected": {
          "number": "123",
          "street": "Main",
          "type": "St",
          "city": "Toronto",
          "state": "ON",
          "zip": "M5V 3A8",
          "country": "CA"
        }
      },
      {
        "description": "should handle complex addresses with all snake_case fields",
        "input": "100 N Main St Unit 502, Rural Route 3, Smalltown State 12345-6789",
        "options": {
          "useSnakeCase": true
        },
        "expected": {
          "number": "100",
          "prefix": "N",
          "street": "Main",
          "type": "St"
        },
        "notExpected": [
          "secUnitType",
          "secUnitNum",
          "ruralRoute",
          "generalDelivery",
          "zipValid",
          "postalValid"
        ]
      },
      {
        "description": "should return null in snake_case mode when parsing fails",
        "input": "",
        "options": {
          "useSnakeCase": true
        },
        "expected": null
      }
    ],
    "multipleParserFunctions": [
      {
        "description": "Test all parser functions with standard address",
        "input": "1600 Pennsylvania Avenue Washington DC",
        "functions": [
          "parseLocation",
          "parseAddress",
          "parseInformalAddress"
        ],
        "expectedResult": "truthy"
      },
      {
        "description": "Test all parser functions with complex address",
        "input": "350 5th Avenue, Floor 86, New York, NY 10118",
        "functions": [
          "parseLocation",
          "parseAddress",
          "parseInformalAddress"
        ],
        "expectedResult": "truthy"
      },
      {
        "description": "Test all parser functions with Canadian address",
        "input": "24 Sussex Drive Ottawa ON K1M 1M4",
        "functions": [
          "parseLocation",
          "parseAddress",
          "parseInformalAddress"
        ],
        "expectedResult": "truthy"
      },
      {
        "description": "Test all parser functions with PO Box",
        "input": "PO Box 123 Station A Toronto ON M5W 1A1",
        "functions": [
          "parseLocation",
          "parseAddress",
          "parseInformalAddress"
        ],
        "expectedResult": "truthy"
      },
      {
        "description": "Test all parser functions with intersection",
        "input": "Mission & Valencia San Francisco CA",
        "functions": [
          "parseLocation",
          "parseAddress",
          "parseInformalAddress"
        ],
        "expectedResult": "truthy"
      }
    ],
    "usBasicAddresses": [
      {
        "input": "1005 Gravenstein Hwy 95472",
        "expected": {
          "number": "1005",
          "street": "Gravenstein",
          "type": "Hwy",
          "zip": "95472"
        },
        "description": "Basic address with highway abbreviation and ZIP code"
      },
      {
        "input": "1005 Gravenstein Hwy, 95472",
        "expected": {
          "number": "1005",
          "street": "Gravenstein",
          "type": "Hwy",
          "zip": "95472"
        },
        "description": "Highway address with comma before ZIP code"
      },
      {
        "input": "1005 Gravenstein Hwy N, 95472",
        "expected": {
          "number": "1005",
          "suffix": "N",
          "street": "Gravenstein",
          "type": "Hwy",
          "zip": "95472"
        },
        "description": "Highway with directional suffix North"
      },
      {
        "input": "1005 Gravenstein Highway North, 95472",
        "expected": {
          "number": "1005",
          "suffix": "N",
          "street": "Gravenstein",
          "type": "Hwy",
          "zip": "95472"
        },
        "description": "Highway with full directional suffix North"
      },
      {
        "input": "1005 N Gravenstein Highway, Sebastopol, CA",
        "expected": {
          "number": "1005",
          "prefix": "N",
          "street": "Gravenstein",
          "type": "Hwy",
          "city": "Sebastopol",
          "state": "CA"
        },
        "description": "Highway with directional prefix and city/state"
      },
      {
        "input": "1005 N Gravenstein Highway, Suite 500, Sebastopol, CA",
        "expected": {
          "number": "1005",
          "prefix": "N",
          "street": "Gravenstein",
          "type": "Hwy",
          "secUnitType": "Suite",
          "secUnitNum": "500",
          "city": "Sebastopol",
          "state": "CA"
        },
        "description": "Highway address with suite number"
      },
      {
        "input": "1005 N Gravenstein Hwy Suite 500 Sebastopol, CA",
        "expected": {
          "number": "1005",
          "prefix": "N",
          "street": "Gravenstein Hwy Suite 500 Sebastopol",
          "state": "CA"
        },
        "description": "Highway address with unit in street field"
      },
      {
        "input": "1005 N Gravenstein Highway, Sebastopol, CA, 95472",
        "expected": {
          "number": "1005",
          "prefix": "N",
          "street": "Gravenstein",
          "type": "Hwy",
          "city": "CA",
          "zip": "95472"
        },
        "description": "Highway address with extra comma before ZIP code"
      },
      {
        "input": "1005 N Gravenstein Highway Sebastopol CA 95472",
        "expected": {
          "number": "1005",
          "prefix": "N",
          "street": "Gravenstein",
          "type": "Hwy",
          "city": "Sebastopol",
          "state": "CA",
          "zip": "95472"
        },
        "description": "Highway address without commas"
      },
      {
        "input": "1600 Pennsylvania Ave. Washington DC",
        "expected": {
          "number": "1600",
          "street": "Pennsylvania",
          "type": "Ave",
          "city": "Washington",
          "state": "DC"
        },
        "description": "Famous address with abbreviated avenue and period"
      },
      {
        "input": "1600 Pennsylvania Avenue Washington DC",
        "expected": {
          "number": "1600",
          "street": "Pennsylvania",
          "type": "Ave",
          "city": "Washington",
          "state": "DC"
        },
        "description": "Famous address with full avenue name"
      },
      {
        "input": "115 Broadway San Francisco CA",
        "expected": {
          "number": "115",
          "street": "Broadway",
          "city": "San Francisco",
          "state": "CA"
        },
        "description": "Broadway address without street type"
      },
      {
        "input": "7800 Mill Station Rd, Sebastopol, CA 95472",
        "expected": {
          "number": "7800",
          "street": "Mill Station",
          "type": "Rd",
          "city": "Sebastopol",
          "state": "CA",
          "zip": "95472"
        },
        "description": "Road address with commas and full ZIP"
      },
      {
        "input": "7800 Mill Station Rd Sebastopol CA 95472",
        "expected": {
          "number": "7800",
          "street": "Mill Station",
          "type": "Rd",
          "city": "Sebastopol",
          "state": "CA",
          "zip": "95472"
        },
        "description": "Road address without commas"
      },
      {
        "input": "1005 State Highway 116 Sebastopol CA 95472",
        "expected": {
          "number": "1005",
          "street": "State Hwy 116",
          "city": "Sebastopol",
          "state": "CA",
          "zip": "95472"
        },
        "description": "State highway with abbreviated type (consistent with USPS standards)"
      }
    ],
    "canadaBasicAddresses": [
      {
        "input": "123 Main Street, Toronto, ON M5V 3A8",
        "expected": {
          "number": "123",
          "street": "Main",
          "type": "St",
          "city": "Toronto",
          "state": "ON",
          "zip": "M5V 3A8"
        },
        "description": "Basic address with commas separating components"
      },
      {
        "input": "123 Main Street Toronto ON M5V 3A8",
        "expected": {
          "number": "123",
          "street": "Main",
          "type": "St",
          "city": "Toronto",
          "state": "ON",
          "zip": "M5V 3A8"
        },
        "description": "Basic address without commas"
      },
      {
        "input": "456 Rue Saint-Jacques Montréal QC H2Y 1L9",
        "expected": {
          "number": "456",
          "type": "Rue",
          "street": "Saint-Jacques Montréal",
          "state": "QC",
          "zip": "H2Y 1L9"
        },
        "description": "French street name with 'Rue' prefix"
      },
      {
        "input": "789 King St W Unit 501 Toronto ON M5V 1M2",
        "expected": {
          "number": "789",
          "secUnitType": "Unit",
          "secUnitNum": "501",
          "unit": "Unit 501",
          "suffix": "W",
          "street": "King",
          "type": "St",
          "city": "Toronto",
          "state": "ON",
          "zip": "M5V 1M2"
        },
        "description": "Address with unit number and directional suffix"
      },
      {
        "input": "1234 West Broadway Vancouver BC V6H 1G5",
        "expected": {
          "number": "1234",
          "prefix": "W",
          "street": "Broadway",
          "city": "Vancouver",
          "state": "BC",
          "zip": "V6H 1G5"
        },
        "description": "Address with directional prefix 'West'"
      },
      {
        "input": "567 Avenue des Pins Est Montréal QC H2W 1S6",
        "expected": {
          "number": "567",
          "type": "Ave",
          "street": "Des Pins Est Montréal",
          "state": "QC",
          "zip": "H2W 1S6"
        },
        "description": "French street name with 'Avenue' and directional 'Est'"
      },
      {
        "input": "100 Sparks Street Suite 1200 Ottawa ON K1P 5B7",
        "expected": {
          "number": "100",
          "secUnitType": "Suite",
          "secUnitNum": "1200",
          "unit": "Suite 1200",
          "street": "Sparks",
          "type": "St",
          "city": "Ottawa",
          "state": "ON",
          "zip": "K1P 5B7"
        },
        "description": "Address with suite number designation"
      },
      {
        "input": "22 Chemin de la Côte-Sainte-Catherine Outremont QC H2V 2A2",
        "expected": {
          "number": "22",
          "type": "Ch",
          "street": "De la Côte-Sainte-Catherine",
          "city": "Outremont",
          "state": "QC",
          "zip": "H2V 2A2"
        },
        "description": "French 'Chemin' street type with complex hyphenated name"
      },
      {
        "input": "888 Burrard Street Vancouver BC V6Z 1X9",
        "expected": {
          "number": "888",
          "street": "Burrard",
          "type": "St",
          "city": "Vancouver",
          "state": "BC",
          "zip": "V6Z 1X9"
        },
        "description": "Standard Vancouver street address"
      },
      {
        "input": "333 University Avenue Toronto ON M5G 1R8",
        "expected": {
          "number": "333",
          "street": "University",
          "type": "Ave",
          "city": "Toronto",
          "state": "ON",
          "zip": "M5G 1R8"
        },
        "description": "University Avenue in downtown Toronto"
      },
      {
        "input": "1500 Don Mills Road North York ON M3B 3K4",
        "expected": {
          "number": "1500",
          "suffix": "N",
          "street": "Don Mills",
          "type": "Rd",
          "city": "York",
          "state": "ON",
          "zip": "M3B 3K4"
        },
        "description": "Address with directional suffix 'North' abbreviated to 'N'"
      }
    ],
    "intersections": [
      {
        "input": "Mission & Valencia San Francisco CA",
        "expected": {
          "city": "San Francisco",
          "state": "CA",
          "street1": "Mission",
          "type1": "",
          "street2": "Valencia",
          "type2": ""
        },
        "description": "Basic intersection with ampersand separator"
      },
      {
        "input": "Mission & Valencia, San Francisco CA",
        "expected": {
          "city": "San Francisco",
          "state": "CA",
          "street1": "Mission",
          "type1": "",
          "street2": "Valencia",
          "type2": ""
        },
        "description": "Intersection with ampersand and comma before city"
      },
      {
        "input": "Mission St and Valencia St San Francisco CA",
        "expected": {
          "city": "San Francisco",
          "state": "CA",
          "street1": "Mission",
          "type1": "St",
          "street2": "Valencia",
          "type2": "St"
        },
        "description": "Intersection with 'and' connector and city location"
      },
      {
        "input": "Mission St and Valencia St",
        "expected": {
          "street1": "Mission",
          "type1": "St",
          "street2": "Valencia",
          "type2": "St"
        },
        "description": "Intersection with 'and' connector - no location"
      },
      {
        "input": "Mission St & Valencia St San Francisco CA",
        "expected": {
          "city": "San Francisco",
          "state": "CA",
          "street1": "Mission",
          "type1": "St",
          "street2": "Valencia",
          "type2": "St"
        },
        "description": "Intersection with individual street types"
      },
      {
        "input": "Mission and Valencia Sts San Francisco CA",
        "expected": {
          "city": "San Francisco",
          "state": "CA",
          "street1": "Mission",
          "type1": "",
          "street2": "Valencia",
          "type2": "Sts"
        },
        "description": "Intersection with plural 'Sts' for second street"
      },
      {
        "input": "Mission & Valencia Sts. San Francisco CA",
        "expected": {
          "city": "San Francisco",
          "state": "CA",
          "street1": "Mission",
          "type1": "",
          "street2": "Valencia",
          "type2": "Sts"
        },
        "description": "Intersection with abbreviated 'Sts.' and period"
      },
      {
        "input": "Mission and Valencia Sts.",
        "expected": {
          "street1": "Mission",
          "type1": "",
          "street2": "Valencia",
          "type2": "Sts"
        },
        "description": "Intersection without location - 'and' connector with period"
      },
      {
        "input": "Mission & Valencia Streets San Francisco CA",
        "expected": {
          "city": "San Francisco",
          "state": "CA",
          "street1": "Mission",
          "type1": "",
          "street2": "Valencia",
          "type2": "Sts"
        },
        "description": "Intersection with full word 'Streets'"
      },
      {
        "input": "Mission Avenue and Valencia Street San Francisco CA",
        "expected": {
          "city": "San Francisco",
          "state": "CA",
          "street1": "Mission",
          "type1": "Ave",
          "street2": "Valencia",
          "type2": "St"
        },
        "description": "Intersection with different street types for each street"
      },
      {
        "input": "Main St and Oak Ave, Springfield, IL",
        "expected": {
          "city": "Springfield",
          "state": "IL",
          "street1": "Main",
          "type1": "St",
          "street2": "Oak",
          "type2": "Ave"
        },
        "description": "Generic intersection in Springfield with comma separators"
      },
      {
        "input": "N Main St & E Oak Ave",
        "expected": {
          "prefix1": "N",
          "street1": "Main",
          "type1": "St",
          "prefix2": "E",
          "street2": "Oak",
          "type2": "Ave"
        },
        "description": "Intersection with directional prefixes for both streets"
      },
      {
        "input": "Broadway @ 42nd St, New York, NY",
        "expected": {
          "city": "New York",
          "state": "NY",
          "street1": "Broadway",
          "type1": "",
          "street2": "42nd",
          "type2": "St"
        },
        "description": "Intersection using '@' symbol as separator"
      }
    ],
    "usSpecialFormats": [
      {
        "input": "233 S Wacker Dr 60606-6306",
        "expected": {
          "number": "233",
          "prefix": "S",
          "street": "Wacker",
          "type": "Dr",
          "zip": "60606",
          "plus4": "6306"
        },
        "description": "ZIP+4 format with hyphen separator"
      },
      {
        "input": "233 S Wacker Dr 606066306",
        "expected": {
          "number": "233",
          "prefix": "S",
          "street": "Wacker",
          "type": "Dr",
          "zip": "60606",
          "plus4": "6306"
        },
        "description": "ZIP+4 format concatenated without separator"
      },
      {
        "input": "233 S Wacker Dr 60606 6306",
        "expected": {
          "number": "233",
          "prefix": "S",
          "street": "Wacker",
          "type": "Dr",
          "zip": "60606",
          "plus4": "6306"
        },
        "description": "ZIP+4 format with space separator"
      },
      {
        "input": "48S 400E, Salt Lake City UT",
        "expected": {
          "number": "48",
          "prefix": "S",
          "street": "400",
          "suffix": "E",
          "city": "Salt Lake City",
          "state": "UT"
        },
        "description": "Grid-based address system (Salt Lake City style)"
      },
      {
        "input": "N95W18855 Jay Dr, Menomonee Falls, WI 53051",
        "expected": {
          "number": "N95W18855",
          "street": "Jay",
          "type": "Dr",
          "city": "Menomonee Falls",
          "state": "WI",
          "zip": "53051"
        },
        "description": "Wisconsin-style grid number with directionals"
      },
      {
        "input": "N95W18855 Jay Dr Menomonee Falls WI 53051",
        "expected": {
          "number": "N95W18855",
          "street": "Jay",
          "type": "Dr",
          "city": "Menomonee Falls",
          "state": "WI",
          "zip": "53051"
        },
        "description": "Wisconsin grid number without commas"
      },
      {
        "input": "n95w18855 Jay Dr Menomonee Falls WI 53051",
        "expected": {
          "number": "n95w18855",
          "street": "Jay",
          "type": "Dr",
          "city": "Menomonee Falls",
          "state": "WI",
          "zip": "53051"
        },
        "description": "Wisconsin grid number in lowercase"
      },
      {
        "input": "John Doe, 120 E 96th St, New York, NY 10128",
        "expected": {
          "number": "120",
          "prefix": "E",
          "street": "96th",
          "type": "St",
          "city": "New York",
          "state": "NY",
          "zip": "10128"
        },
        "description": "Address with person name prefix"
      },
      {
        "input": "565 Bush St Apt 7 San Francisco CA 94108",
        "expected": {
          "number": "565",
          "street": "Bush",
          "type": "St",
          "secUnitType": "Apartment",
          "secUnitNum": "7",
          "city": "San Francisco",
          "state": "CA",
          "zip": "94108"
        },
        "description": "Street address with apartment number"
      }
    ]
  }
}